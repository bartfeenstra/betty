{% do citer.track() %}
{%- import 'macro/citation.html.j2' as citationMacros -%}
<!doctype html>
<html lang="{{ locale }}"
      prefix="foaf: http://xmlns.com/foaf/0.1/ og: http://ogp.me/ns# rel: http://purl.org/vocab/relationship/">
<head>
    <title>{{ title | striptags }} - {{ site.configuration.title }}</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Betty (https://github.com/bartfeenstra/betty)"/>
    <meta name="og:title" content="{{ title | striptags }}"/>
    <meta name="og:site_name" content="{{ site.configuration.title }}"/>
    {% if resource %}
        {%- for file in resource.files | default([]) -%}
            {%- if file.type.startswith('image/') %}
                <meta name="og:image" content="{{ file | image(600, 600) | static_url }}"/>
                {%- if file.description %}
                    <meta name="og:image:description" content="{{ file.description }}"/>
                {%- endif -%}
            {%- endif -%}
        {%- endfor -%}
        <link rel="canonical" href="{{ resource | url(absolute=true) }}"/>
        {%- set resouce_json = resource | json -%}
        {% if resouce_json %}
            <script type="application/ld+json">
              {{ resouce_json }}
            </script>
        {% endif %}
    {% endif %}
    <meta name="og:image" content="/betty-512x512.png"/>
    <link rel="stylesheet" href="{{ '/betty.css' | static_url }}"/>
    <link rel="icon" href="{{ '/betty.ico' | static_url }}">
    <link rel="manifest" href="{{ '/betty.webmanifest' | static_url }}">
    <style id="js-visibility">
        .js-show {
            display: none;
        }
    </style>
    <script>
        document.getElementById('js-visibility').innerHTML = '.js-hide{display:none;}'
    </script>
    {%- if 'betty.plugins.js.Js' in plugins %}
    <script src="{{ '/betty.js' | static_url }}" defer></script>
    {% endif -%}
</head>
<body>
<nav id="nav-primary">
    <a id="site-title" href="{{ '/index.html' | url }}" title="{{ site.configuration.title }}">{{ site.configuration.title }}</a>
    {%- if 'betty.plugins.search.Search' in plugins %}
        <form id="search" autocomplete="off">
            <input id="search-query" type="search"/>
        </form>
    {% endif -%}
    <div id="nav-sections" class="nav-primary-expandable">
        <h2 class="nav-primary-action">{% trans %}Menu{% endtrans %}</h2>
        <div class="nav-primary-expanded">
            <ul class="nav-secondary">
                <li><a href="{{ '/person/index.html' | url }}">{{ _('People') }}</a></li>
                <li><a href="{{ '/event/index.html' | url }}">{{ _('Events') }}</a></li>
                <li><a href="{{ '/place/index.html' | url }}">{{ _('Places') }}</a></li>
                <li><a href="{{ '/file/index.html' | url }}">{{ _('Media') }}</a></li>
                <li><a href="{{ '/source/index.html' | url }}">{{ _('Sources') }}</a></li>
            </ul>
        </div>
    </div>
    {%- if resource and site.configuration.multilingual %}
        <div id="nav-locale" class="nav-primary-expandable">
            <h2 class="nav-primary-action">{{ _('Language') }}</h2>
            <div class="nav-primary-expanded">
                <ul class="nav-secondary">
                {% set ns = namespace(available_locales=[]) %}
                {% for available_locale in site.configuration.locales %}
                    {% set available_locale_data = site.configuration.locales[available_locale].alias | locale_get_data %}
                    {% do ns.available_locales.append((available_locale, available_locale_data.get_display_name())) %}
                {% endfor %}
                {% for available_locale, available_locale_name in ns.available_locales | sort(attribute='1') %}
                    <li><a href="{{ resource | url(locale=available_locale) }}" hreflang="{{ available_locale }}" lang="{{ available_locale }}" rel="alternate">{{ available_locale_name }}</a></li>
                {% endfor %}
                </ul>
            </div>
        </div>
    {% endif -%}
</nav>
<div id="content">
    <h1>{{ title }}</h1>
    {%- block content -%}{%- endblock -%}
    {% if citer | length > 0 %}
        <section class="references">
            <h2>{{ _('References') }}</h2>
            <ol>
            {% for number, citation in citer %}
                <li id="reference-{{ number }}">{{ citationMacros.referenceLabel(citation) }}</li>
            {% endfor %}
            </ol>
        </section>
    {% endif %}
</div>
<footer>
    {% include 'footer.html.j2' %}
</footer>
</body>
</html>
