#!/usr/bin/env bash

set -Eeuo pipefail

cd "$(dirname "$0")/.."

# Install Python dependencies.
pip install -e '.[setuptools]'

# Install JavaScript dependencies.
npm install

# Prepare the workspace directories.
rm -rf betty.egg-info build dist

# Build the package.
python setup.py sdist
python setup.py bdist_wheel --universal
twine check ./dist/*
